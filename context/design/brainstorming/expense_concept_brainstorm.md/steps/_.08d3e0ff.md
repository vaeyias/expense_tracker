---
timestamp: 'Sat Oct 11 2025 12:07:31 GMT-0400 (Eastern Daylight Time)'
parent: '[[..\20251011_120731.ae185e91.md]]'
content_id: 08d3e0ffe047ff6531415edfcebb9abde13cfabcde1f2f1d929b794b2b865dee
---

# Documentation

Every concept should have inline documentation and commenting:

* The concept itself should be paired with its purpose.
* The state should be described next to any types.
* Any testing should be guided by the principle.
* Each action should state the requirements and effects, and tests should check that both work against variations.

concept GroupExpenseTracking
purpose allows users to record and manage shared expenses within a group
principle after a group is created, users can add expenses to the group. each expense tracks the payer and the total cost, and how costs are divided between different users
state
a set of Groups with
a name String
a creator User
a set of Users
a set of GroupExpenses

```
    a set of GroupExpenses
        a title String
        a description String
        a category String
        a totalCost Number
        a payer User
        a date Date
        a debtMapping Map<User:Number>

actions
    createGroup(groupName: String, creator: User, description: String): (group:Group)
        requires creator exists
        effect creates a new group with the given groupName, the creator, the set of users, the description, and the startDate/endDate set to None.

    leaveGroup(group:Group, user:User):
        requires group exists, user is part of group, and user does not owe/is not owed anything in the group
        effect removes the user from the group

    addUser(user: User, friend: User, group: Group):
        requires user exists, friend exists, group exists, user is in group and is friends with the friend. user is not equal to friend.
        effect adds friend to the group

    removeUser(owner: User, user:User, group:Group)
        requires owner exists, user exists, group exists, owner is in the group and is the owner of the group, user is in the group
        effect removes the user from the group

    addGroupExpense(payer:User, group:Group, title:String, description:String, category:String, totalCost:Number, date:Date, debtMapping:Map<User:Number>): (expense:GroupExpense)
        requires group and payer exist, payer is in group, totalCost > 0, all values in debtMapping are positive and sum to totalCost
        effect creates a GroupExpense with the given details and stores it in the group

    editGroupExpense(payer:User, group:Group, oldExpense:GroupExpense, title:String, description:String, category:String, totalCost:Number, date:Date, debtMapping:Map<User:Number>): (newExpense:GroupExpense)
        requires payer and oldExpense exist, oldExpense is in group, payer is the payer of oldExpense
        effect updates the GroupExpense with the given details

    deleteGroupExpense(payer:User, group:Group, expense:GroupExpense): (expense:GroupExpense)
        requires payer and expense exist, expense is in group, payer is the payer of expense
        effect deletes the GroupExpense from the group

    getGroupSpendingByCategory(group:Group, category:String):(spending:Number)
        requires group exists and contains expenses with the given category
        effect sums the totalCost of all expenses with the given group and category.
```

concept PersonalExpenseTracking
purpose allows users to track their own share of expenses, either within a group or individually
principle each personal expense belongs to a user and records how much they owe or paid for a given item
state
a set of PersonalExpenses
a title String
a user User
a payer User
a group Group
a category String
a date Date
a personalCost Number

```
actions
    createPersonalExpense(user:User, payer:User, group:Group, category:String, date:Date, title: String, personalCost:Number): (expense:PersonalExpense)
        requires user, payer, group exist, both user and payer are in the group. personalCost is a positive number.
        effect creates a PersonalExpense with given details

    editPersonalExpense(user:User, oldExpense:PersonalExpense, category:String, date:Date, personalCost:Number): (newExpense:PersonalExpense)
        requires user and oldExpense exists and user is the payer of the expense
        effect updates the PersonalExpense with given details

    deletePersonalExpense(user:User, expense:PersonalExpense):(expense:PersonalExpense)
        requires user and expense exists and user is the payer of the expense
        effect deletes the PersonalExpense

    deleteAllPersonalExpense(user:User, group:GroupExpense):
        requires user and groupExpense exists and user is the payer of the expense
        effect deletes all PersonalExpenses associated with the group

    getUserSpending(user:User, group:Group): (spending:Number)
        requires user and group exist, user is in group
        effect sums the cost of all PersonalExpenses associated with user in group and returns the total
```

I want to integrate the expense aspect of the GroupExpenseTracker and PersonalExpenseTracker into one concept called Expense. The actions should be creating, editing, and deleting an expense. Include a creator user, payer, group, debtMapping, etc for each expense. Don't implement the code yet. Just give me the concept.
